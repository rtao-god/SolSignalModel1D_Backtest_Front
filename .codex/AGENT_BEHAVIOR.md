# Правила работы агента (Frontend)

## Комментарии в `.ts/.tsx`

### Принцип
- Комментарий пишется только там, где он добавляет смысл: неочевидная логика, контракт, инвариант, причина решения, риск.
- Если смысл и так очевиден из кода, комментарий не нужен.
- Комментарий должен быть техническим и полезным: без банальностей и пересказа кода.
- Язык комментариев: русский (англ. термины допустимы, если точнее передают смысл).

### Главный комментарий файла (обязательно для нетривиальных компонентов)
- Для страниц/крупных компонентов со сложной логикой добавляй главный комментарий сразу после импортов.
- Главный комментарий не нужен в тривиальных файлах (например, простой `types.ts`, тонкие реэкспорты, примитивные UI-обёртки без логики).
- Формат главного комментария:
  - строка роли компонента (что это и за что отвечает);
  - `Зачем:` (какую задачу решает в продукте);
  - `Контракты:` (что ожидается от входов/данных и что гарантируется);
  - `Источники данных:` (хуки, запросы, синхронизация hash, локальное состояние и т.д.);
  - `Риски:` (по необходимости);
  - `Public API:` только если экспортов несколько или API неочевиден.

Пример:
```tsx
/*
	ModelStatsPage — страница отчёта статистики моделей и переключения сегментов.

	Зачем:
		- Даёт обзор качества моделей по сегментам OOS/Train/Full/Recent.
		- Позволяет переключать режим представления (business/technical).

	Контракты:
		- Внутренний компонент получает только валидные данные отчёта.
		- Сегменты извлекаются из заголовков секций по согласованному формату.

	Источники данных:
		- Данные приходят из useModelStatsReportQuery().
		- Текущая секция синхронизируется с hash через useSectionPager.
*/
```

### Когда использовать `//`
- Для короткого локального пояснения в 1-2 предложениях.
- Без подпунктов и без структуры разделов.

Пример:
```ts
// domId нужен для стабильного hash-якоря и связи section с заголовком.
```

### Когда использовать `/* ... */`
- Для структурированного комментария на несколько строк.
- Для описания контрактов, инвариантов, причин решения и рисков, которые не помещаются в `//`.

### Что запрещено
- Комментарии уровня «что и так видно»:
  - `// Пропсы компонента`
  - `// Массив секций`
  - `// Рендерим кнопку`
- Формальные «главные» комментарии без полезного содержания.
- Дублирование очевидных названий типов/полей вместо объяснения смысла.

### Практические правила
- В `types.ts` главный комментарий обычно не нужен; добавляй только локальные пояснения, если контракт нетривиален.
- Для констант и маппингов комментируй не «что это», а «почему так» и «какие ограничения».
- Если файл > 350-400 строк и содержит несколько независимых зон логики, оцени декомпозицию.

## Комментарии в `.scss`
- Комментируй только логические блоки или неочевидные решения по стилям.
- Не используй декоративные комментарии ради количества.
- Коротко фиксируй смысл блока (например, ограничение ширины, поведение сетки, адаптивный брейкпоинт).

## Термины и сложное поведение в UI
- Если в тексте UI появляется термин, сокращение или нетривиальная логика, добавляй пояснение через `TermTooltip`.
- Используй `TermTooltip` точечно: только там, где без пояснения возможна неверная интерпретация.
- Текст `description` должен быть коротким и прикладным: что это, зачем это нужно, как влияет на поведение.
- Не дублируй подсказками очевидные слова и базовые элементы интерфейса.

## Структура файлов компонентов
- Базовый формат: `Component.tsx` + `Component.module.scss` + `types.ts` рядом.
- `index.ts` добавляй только когда это упрощает импорты или является внешним API.
- Типы реэкспортируй только если они реально используются вне папки (проверка через `rg`).
- `className?: string` держи по умолчанию, если это не ломает контракт компонента.

## Качество UI
- По умолчанию делай адаптивный интерфейс: desktop -> tablet/mobile.
- Без ограничений дизайн-системы делай аккуратный современный UI без декоративного перегруза.
- Ошибки загрузки и проблемные состояния должны иметь понятные диагностические сообщения.
